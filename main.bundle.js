!function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([,function(e,t,r){e.exports=r(3)},function(e,t,r){},function(e,t,r){"use strict";r.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function s(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function c(e){return"function"==typeof e}var o=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;o=e},get useDeprecatedSynchronousErrorHandling(){return o}};function a(e){setTimeout(function(){throw e})}var l={closed:!0,next:function(e){},error:function(e){if(i.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete:function(){}},f=Array.isArray||function(e){return e&&"number"==typeof e.length};function h(e){return null!==e&&"object"==typeof e}function u(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}u.prototype=Object.create(Error.prototype);var p=u,d=function(){function o(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return o.prototype.unsubscribe=function(){var t,r=!1;if(!this.closed){var e=this._parent,n=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,u=n?n.length:0;e;)e.remove(this),e=++s<u&&n[s]||null;if(c(o))try{o.call(this)}catch(e){r=!0,t=e instanceof p?b(e.errors):[e]}if(f(i))for(s=-1,u=i.length;++s<u;){var a=i[s];if(h(a))try{a.unsubscribe()}catch(e){r=!0,t=t||[],e instanceof p?t=t.concat(b(e.errors)):t.push(e)}}if(r)throw new p(t)}},o.prototype.add=function(e){var t=e;switch(typeof e){case"function":t=new o(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof o)){var r=t;(t=new o)._subscriptions=[r]}break;default:if(!e)return o.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(t._addParent(this)){var n=this._subscriptions;n?n.push(t):this._subscriptions=[t]}return t},o.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},o.prototype._addParent=function(e){var t=this._parent,r=this._parents;return t!==e&&(t?r?-1===r.indexOf(e)&&(r.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))},o.EMPTY=((e=new o).closed=!0,e),o}();function b(e){return e.reduce(function(e,t){return e.concat(t instanceof p?t.errors:t)},[])}var y="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(o){function i(e,t,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=l;break;case 1:if(!e){n.destination=l;break}if("object"==typeof e){e instanceof i?(n.syncErrorThrowable=e.syncErrorThrowable,(n.destination=e).add(n)):(n.syncErrorThrowable=!0,n.destination=new _(n,e));break}default:n.syncErrorThrowable=!0,n.destination=new _(n,e,t,r)}return n}return s(i,o),i.prototype[y]=function(){return this},i.create=function(e,t,r){var n=new i(e,t,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},i}(d),_=function(u){function e(e,t,r,n){var o,i=u.call(this)||this;i._parentSubscriber=e;var s=i;return c(t)?o=t:t&&(o=t.next,r=t.error,n=t.complete,t!==l&&(c((s=Object.create(t)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=r,i._complete=n,i}return s(e,u),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=i.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;a(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw e;a(e)}},e.prototype.__tryOrSetError=function(t,e,r){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(a(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(v);var w="function"==typeof Symbol&&Symbol.observable||"@@observable";function m(){}function g(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:m}var S=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,r){var n=this.operator,o=function(e,t,r){if(e){if(e instanceof v)return e;if(e[y])return e[y]()}return e||t||r?new v(e,t,r):new v(l)}(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||i.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),i.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e,r=t.closed,n=t.destination,o=t.isStopped;if(r||o)return!1;e=n&&n instanceof v?n:null}return!0}(t)?console.warn(e):t.error(e)}},r.prototype.forEach=function(n,e){var o=this;return new(e=x(e))(function(e,t){var r;r=o.subscribe(function(e){try{n(e)}catch(e){t(e),r&&r.unsubscribe()}},t,e)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[w]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:g(e)(this)},r.prototype.toPromise=function(e){var n=this;return new(e=x(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},r.create=function(e){return new r(e)},r}();function x(e){if(e||(e=i.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function j(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}j.prototype=Object.create(Error.prototype);var E=j,O=function(n){function e(e,t){var r=n.call(this)||this;return r.subject=e,r.subscriber=t,r.closed=!1,r}return s(e,n),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},e}(d),k=function(r){function e(e){var t=r.call(this,e)||this;return t.destination=e,t}return s(e,r),e}(v),P=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(e,t),e.prototype[y]=function(){return new k(this)},e.prototype.lift=function(e){var t=new T(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new E;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].next(e)},e.prototype.error=function(e){if(this.closed)throw new E;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new E;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new E;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new E;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new O(this,e))},e.prototype.asObservable=function(){var e=new S;return e.source=this,e},e.create=function(e,t){return new T(e,t)},e}(S),T=function(n){function e(e,t){var r=n.call(this)||this;return r.destination=e,r.source=t,r}return s(e,n),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):d.EMPTY},e}(P);function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var L=new(function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=this,t="_iterationsSubject",r=new P,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"onIteration",value:function(e){this._iterationsSubject.asObservable().subscribe(function(){e()})}},{key:"next",value:function(){this._iterationsSubject.next()}}])&&C(e.prototype,t),r&&C(e,r),n}());function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var I=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=[],(t="_edges")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"addEdge",value:function(e){this._edges.push(e)}},{key:"removeEdge",value:function(t){this._edges=this._edges.map(function(e){return-1===e||e.column===t.column&&e.row===t.row?-1:e})}},{key:"getEdges",value:function(){return this._edges}}])&&z(e.prototype,t),r&&z(e,r),n}();function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r={},(t="_visitedNodes")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"declareNodeAsVisited",value:function(e,t){this._visitedNodes[e]||(this._visitedNodes[e]=[]),this._visitedNodes[e][t]=!0}},{key:"isVertexVisited",value:function(e,t){return!!this._visitedNodes[e]&&this._visitedNodes[e][t]}}])&&M(e.prototype,t),r&&M(e,r),n}();function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var D=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=void 0,(t="_adjacencyList")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this._adjacencyList=[]}var e,t,r;return e=n,(t=[{key:"AddVertex",value:function(e,t){var r=new I;this._adjacencyList[e]||(this._adjacencyList[e]=[]),this._adjacencyList[e][t]=r}},{key:"getVertex",value:function(e,t){return this._adjacencyList[e][t]}},{key:"removeEdge",value:function(e,t){this._adjacencyList[e.row]&&this._adjacencyList[e.row][e.column]&&this._adjacencyList[e.row][e.column].removeEdge(t),this._adjacencyList[t.row]&&this._adjacencyList[t.row][t.column]&&this._adjacencyList[t.row][t.column].removeEdge(e)}},{key:"generateEntropy",value:function(e){var t=this._adjacencyList.length+this._adjacencyList.reduce(function(e,t){return e+=t.length-1},0),r=e,n=[e],o=new A;for(o.declareNodeAsVisited(e.row,e.column);t;){var i=this._adjacencyList[r.row][r.column].getEdges().filter(function(e){return-1!==e&&e!==1/0&&!o.isVertexVisited(e.row,e.column)});if(i.length){var s=this._pickRandomIndex(i.length);n.push(r),this.removeEdge(r,i[s]),r=i[s],o.declareNodeAsVisited(r.row,r.column),t--}else{if(!n.length)break;r=n.pop()}}}},{key:"getGraph",value:function(){return this._adjacencyList}},{key:"_pickRandomIndex",value:function(e){return Math.floor(71*Math.random()%e)}}])&&N(e.prototype,t),r&&N(e,r),n}();function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=new(function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r={},(t="_cellBoundaries")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"registerCellBoundaries",value:function(e,t){(this._cellBoundaries[e.x]?this._cellBoundaries[e.x]:this._cellBoundaries[e.x]={})[e.y]=t.map(function(e){return-1===e})}},{key:"isValidMovement",value:function(e,t){return this._cellBoundaries[e.x][e.y][t]}}])&&V(e.prototype,t),r&&V(e,r),n}());var H=function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=void 0,(n="_context")in(r=this)?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t.addEventListener("unload",function(){return alert("removed")});var i=document.createElement("canvas");i.height=t.height,i.width=t.width,document.querySelector(".layerContainer").appendChild(i),this._context=i.getContext("2d")};function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Y(this,"_visitedPaths",new A),Y(this,"_walkedCellSubject",new P),Y(this,"_walkedCell$",this._walkedCellSubject.asObservable())}var t,r,n;return t=e,(r=[{key:"walkCell",value:function(e){this._isCellWalked(e)?this._walkedCellSubject.next():this._visitedPaths.declareNodeAsVisited(e.x,e.y)}},{key:"onCellWalked",value:function(){return this._walkedCell$}},{key:"_isCellWalked",value:function(e){return this._visitedPaths.isVertexVisited(e.x,e.y)}},{key:"clear",value:function(){this._visitedPaths=new A}}])&&U(t.prototype,r),n&&U(t,n),e}());function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $=new(function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=this,t="_positionSubject",r=new P,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"set",value:function(e){q.walkCell(e),this._positionSubject.next(e)}},{key:"get$",get:function(){return this._positionSubject.asObservable()}}])&&B(e.prototype,t),r&&B(e,r),n}());function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q,Z,ee,te,re=function(e){function i(e,t){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,o=W(i).call(this,e),K(X(r=!o||"object"!==F(o)&&"function"!=typeof o?X(n):o),"_halfOfCellSize",void 0),K(X(r),"_quarterOfCellSize",void 0),K(X(r),"_playerMovementsSubscription",void 0),K(X(r),"_goalPosition",{}),K(X(r),"_playerMovements",$),r._halfOfCellSize=Math.floor(t/2),r._quarterOfCellSize=Math.floor(r._halfOfCellSize/2),r._playerMovementsSubscription=r._playerMovements.get$.subscribe(function(e){e.x===r._goalPosition.x&&r._goalPosition.y===e.y&&L.next()}),r}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(i,H),t=i,n=[{key:"create",value:function(e,t){return new i(e,t)}}],(r=[{key:"init",value:function(e){this._drawGoal(e)}},{key:"clear",value:function(){this._playerMovementsSubscription.unsubscribe()}},{key:"_drawGoal",value:function(e){this._goalPosition=e,this._context.rect(e.x+this._halfOfCellSize-this._quarterOfCellSize,e.y+this._halfOfCellSize-this._quarterOfCellSize,this._halfOfCellSize,this._halfOfCellSize),this._context.fillStyle="red",this._context.fill()}}])&&G(t.prototype,r),n&&G(t,n),i}();function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(Z=Q||(Q={}))[Z.Up=0]="Up",Z[Z.Right=1]="Right",Z[Z.Down=2]="Down",Z[Z.Left=3]="Left",(te=ee||(ee={})).Down="Down",te.ArrowDown="ArrowDown",te.Up="Up",te.ArrowUp="ArrowUp",te.Left="Left",te.ArrowLeft="ArrowLeft",te.Right="Right",te.ArrowRight="ArrowRight";var ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe(this,"_movementSubject",new P),oe(this,"_bindedHandler",void 0),this._bindedHandler=this._handleMovement.bind(this),self.addEventListener("keydown",this._bindedHandler)}var t,r,n;return t=e,(r=[{key:"movements$",value:function(){return this._movementSubject.asObservable()}},{key:"clear",value:function(){self.removeEventListener("keydown",this._bindedHandler)}},{key:"_handleMovement",value:function(e){switch(e.key){case ee.ArrowDown:case ee.Down:this._movementSubject.next(Q.Down);break;case ee.ArrowUp:case ee.Up:this._movementSubject.next(Q.Up);break;case ee.ArrowLeft:case ee.Left:this._movementSubject.next(Q.Left);break;case ee.ArrowRight:case ee.Right:this._movementSubject.next(Q.Right)}}}])&&ne(t.prototype,r),n&&ne(t,n),e}();function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ue,ae,ce,le=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"generate",value:function(e){var t=self.document.createElement("canvas"),r=30*e+.5*e;t.width=r,t.height=r,this.ref=t;var n=self.document.querySelector(".layerContainer");return n.appendChild(t),n.style.width="".concat(r,"px"),n.style.height="".concat(r,"px"),t}},{key:"remove",value:function(){if(this.ref){var t=self.document.querySelector(".layerContainer");t.querySelectorAll("canvas").forEach(function(e){t.removeChild(e)})}}}],(r=null)&&se(t.prototype,r),n&&se(t,n),e}();ce=void 0,(ae="ref")in(ue=le)?Object.defineProperty(ue,ae,{value:ce,enumerable:!0,configurable:!0,writable:!0}):ue[ae]=ce;var fe=function(o){function e(e,t,r){var n=o.call(this)||this;return n.parent=e,n.outerValue=t,n.outerIndex=r,n.index=0,n}return s(e,o),e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},e.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(v),he=function(n){return function(e){for(var t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.closed||e.complete()}},pe=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,a),t}};function de(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var be=de(),ye=function(n){return function(e){for(var t=n[be]();;){var r=t.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}},ve=function(r){return function(e){var t=r[w]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}},_e=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function we(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var me=function(t){if(t instanceof S)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[w])return ve(t);if(_e(t))return he(t);if(we(t))return pe(t);if(t&&"function"==typeof t[be])return ye(t);var e=h(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};var ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(v);var Se=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new xe(e,this.project,this.thisArg))},e}(),xe=function(o){function e(e,t,r){var n=o.call(this,e)||this;return n.project=t,n.count=0,n.thisArg=r||n,n}return s(e,o),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(v);function je(n,o){return new S(o?function(e){var t=new d,r=0;return t.add(o.schedule(function(){r!==n.length?(e.next(n[r++]),e.closed||t.add(this.schedule())):e.complete()})),t}:he(n))}function Ee(e,t){if(!t)return e instanceof S?e:new S(me(e));if(null!=e){if((u=e)&&"function"==typeof u[w])return i=e,new S((s=t)?function(t){var r=new d;return r.add(s.schedule(function(){var e=i[w]();r.add(e.subscribe({next:function(e){r.add(s.schedule(function(){return t.next(e)}))},error:function(e){r.add(s.schedule(function(){return t.error(e)}))},complete:function(){r.add(s.schedule(function(){return t.complete()}))}}))})),r}:ve(i));if(we(e))return n=e,new S((o=t)?function(t){var r=new d;return r.add(o.schedule(function(){return n.then(function(e){r.add(o.schedule(function(){t.next(e),r.add(o.schedule(function(){return t.complete()}))}))},function(e){r.add(o.schedule(function(){return t.error(e)}))})})),r}:pe(n));if(_e(e))return je(e,t);if((r=e)&&"function"==typeof r[be]||"string"==typeof e)return function(t,r){if(!t)throw new Error("Iterable cannot be null");return new S(r?function(n){var o,e=new d;return e.add(function(){o&&"function"==typeof o.return&&o.return()}),e.add(r.schedule(function(){o=t[be](),e.add(r.schedule(function(){if(!n.closed){var e,t;try{var r=o.next();e=r.value,t=r.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),e}:ye(t))}(e,t)}var r,n,o,i,s,u;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Oe(i,s,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),"function"==typeof s?function(e){return e.pipe(Oe(function(r,n){return Ee(i(r,n)).pipe((t=function(e,t){return s(r,e,n,t)},function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Se(t,o))}));var t,o},t))}:("number"==typeof s&&(t=s),function(e){return e.lift(new ke(i,t))})}var ke=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Pe(e,this.project,this.concurrent))},e}(),Pe=function(o){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var n=o.call(this,e)||this;return n.project=t,n.concurrent=r,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return s(e,o),e.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},e.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},e.prototype._innerSub=function(e,t,r){var n=new fe(this,void 0,void 0);this.destination.add(n),function(e,t,r,n,o){if(void 0===o&&(o=new fe(e,r,n)),!o.closed)me(t)(o)}(this,e,t,r,n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(t)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(ge);function Te(e){return e}function Ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n,o=Number.POSITIVE_INFINITY,i=null,s=e[e.length-1];return(r=s)&&"function"==typeof r.schedule?(i=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(o=e.pop())):"number"==typeof s&&(o=e.pop()),null===i&&1===e.length&&e[0]instanceof S?e[0]:(void 0===(n=o)&&(n=Number.POSITIVE_INFINITY),Oe(Te,n)(je(e,i)))}function Le(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Me=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Ie(this,"_movements",void 0),Ie(this,"_handlers",void 0);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._handlers=t,this._movements=Ce.apply(void 0,Le(t.map(function(e){return e.movements$()})))}var e,t,r;return e=n,(t=[{key:"movementsStream",value:function(){return this._movements}},{key:"clear",value:function(){this._handlers.forEach(function(e){e.clear()})}}])&&ze(e.prototype,t),r&&ze(e,r),n}();function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ue=function(e){function s(e,t,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o=this,i=De(s).call(this,e),He(Ve(n=!i||"object"!==Ae(i)&&"function"!=typeof i?Ve(o):i),"layerCanvas",void 0),He(Ve(n),"_halfOfCellSize",void 0),He(Ve(n),"_quarterOfCellSize",void 0),He(Ve(n),"_playerSize",void 0),He(Ve(n),"_collisionDetection",R),He(Ve(n),"_cords",void 0),He(Ve(n),"_playerPosition",void 0),He(Ve(n),"_movements",void 0),n.layerCanvas=e,n._halfOfCellSize=Math.floor(t/2),n._playerSize=n._halfOfCellSize,n._quarterOfCellSize=Math.floor(n._halfOfCellSize/2),n._playerPosition=$,n._movements=r.movementsStream().subscribe(function(e){n._reDraw(e)}),n}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(s,H),t=s,n=[{key:"create",value:function(e,t,r){return new s(e,t,r)}}],(r=[{key:"init",value:function(e){this._cords=e,this._drawPlayer(e)}},{key:"clear",value:function(){this._movements.unsubscribe()}},{key:"_reDraw",value:function(e){if(this._cords){if(!this._collisionDetection.isValidMovement(this._cords,e))return;switch(e){case Q.Left:this._cords.x=this._cords.x-2*this._playerSize,this._drawPlayer(this._cords);break;case Q.Right:this._cords.x=this._cords.x+2*this._playerSize,this._drawPlayer(this._cords);break;case Q.Up:this._cords.y=this._cords.y-2*this._playerSize,this._drawPlayer(this._cords);break;case Q.Down:this._cords.y=this._cords.y+2*this._playerSize,this._drawPlayer(this._cords)}this._playerPosition.set(this._cords)}}},{key:"_drawPlayer",value:function(e){this._context.clearRect(0,0,this.layerCanvas.width,this.layerCanvas.height),this._context.beginPath(),this._context.rect(e.x+this._halfOfCellSize-this._quarterOfCellSize,e.y+this._halfOfCellSize-this._quarterOfCellSize,this._halfOfCellSize,this._halfOfCellSize),this._context.fill(),this._context.closePath()}}])&&Ne(t.prototype,r),n&&Ne(t,n),s}();function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Be=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),qe(this,"_context",void 0),qe(this,"_collisionDetection",void 0),qe(this,"_playerLayer",void 0),qe(this,"_startingPoint",void 0),qe(this,"_goalLayer",void 0),qe(this,"_size",void 0),qe(this,"_movements",void 0);var t=le.generate(e);this._context=t.getContext("2d"),this._size=e,this._collisionDetection=R,this._movements=new Me(new ie),this._playerLayer=Ue.create(t,30,this._movements),this._goalLayer=re.create(t,30);var r=this._size*this._size;this._startingPoint=Math.floor(599*Math.random()%r)}var e,t,r;return e=n,(t=[{key:"render",value:function(e){for(var t=this._generateRandomIndex(),r=this._generateRandomIndex(),n=0;n<this._size;n++)for(var o=0;o<this._size;o++){var i={x:30*o,y:30*n},s=parseInt(n.toString()+o.toString());s===t&&this._playerLayer.init(i),s===r&&this._goalLayer.init(i),this._collisionDetection.registerCellBoundaries(i,e[n][o].getEdges()),this._renderCell(i,e[n][o].getEdges(),30)}}},{key:"clearRender",value:function(){this._movements.clear(),this._playerLayer.clear(),this._goalLayer.clear(),q.clear()}},{key:"_renderCell",value:function(r,e,n){var o=this;e.forEach(function(e,t){switch(o._context.beginPath(),o._adjustedMoveTo(r.x,r.y),t){case 0:o._adjustedMoveTo(r.x,r.y),-1!==e&&o._adjustedLineTo(r.x+n,r.y);break;case 1:o._adjustedMoveTo(r.x+n,r.y),-1!==e&&o._adjustedLineTo(r.x+n,r.y+n);break;case 2:o._adjustedMoveTo(r.x+n,r.y+n),-1!==e&&o._adjustedLineTo(r.x,r.y+n);break;case 3:o._adjustedMoveTo(r.x,r.y+n),-1!==e&&o._adjustedLineTo(r.x,r.y)}o._context.closePath(),o._context.stroke()})}},{key:"_adjustedMoveTo",value:function(e,t){this._context.moveTo(e+.5,t+.5)}},{key:"_generateRandomIndex",value:function(){var e=Math.floor(Math.random()*this._size*71)%this._size,t=Math.floor(Math.random()*this._size*31)%this._size;return parseInt(e.toString()+t.toString())}},{key:"_adjustedLineTo",value:function(e,t){this._context.lineTo(e+.5,t+.5)}}])&&Ye(e.prototype,t),r&&Ye(e,r),n}();function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Fe=function(){function o(e){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=void 0,(r="_boundaries")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._boundaries=e}var e,t,r;return e=o,(t=[{key:"generateYSibling",value:function(e,t,r){var n=e+r;return this._isOutSideBoundaries(n)?1/0:{row:n,column:t}}},{key:"generateXSibling",value:function(e,t,r){var n=t+r;return this._isOutSideBoundaries(n)?1/0:{row:e,column:n}}},{key:"_isOutSideBoundaries",value:function(e){return e<=-1||e>=this._boundaries}}])&&$e(e.prototype,t),r&&$e(e,r),o}();function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var We,Xe,Je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"create",value:function(f){return new Promise(function(e){for(var t=new D,r=new Fe(f),n=0;n<f;n++)for(var o=0;o<f;o++){t.AddVertex(n,o);var i=t.getVertex(n,o),s=r.generateYSibling(n,o,-1),u=r.generateYSibling(n,o,1),a=r.generateXSibling(n,o,-1),c=r.generateXSibling(n,o,1);i.addEdge(s),i.addEdge(c),i.addEdge(u),i.addEdge(a)}t.generateEntropy({row:0,column:0});var l=new Be(f);l.render(t.getGraph()),e(l)})}}],(r=null)&&Ge(t.prototype,r),n&&Ge(t,n),e}();r(2);Xe=5,L.onIteration(function(){We&&We.clearRender(),le.remove(),Je.create(Xe++).then(function(e){return We=e})}),L.next()}]);